"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{7393:function(e,t,s){s.d(t,{default:function(){return w}});var a=s(7437),r=s(2265),n=s(6273),l=s(1257),i=s(994),o=s(7440),d=s(2638),c=s(4889),u=s(6919),f=e=>{var t;let{message:s,isSender:r}=e,{getUserById:n}=(0,u.Z)();return(0,a.jsx)("div",{className:(0,o.cn)("flex justify-start",r&&"justify-end"),children:(0,a.jsxs)("div",{className:"px-2 py-1 break-words",children:[(0,a.jsx)("p",{className:(0,o.cn)("opacity-70 m-1 text-xs text-[#0e81ce]",r&&"text-end"),children:"".concat((null===(t=n(s.senderId))||void 0===t?void 0:t.username)||""," say:")}),(0,a.jsx)("div",{className:(0,o.cn)("flex justify-start",r&&"justify-end"),children:(0,a.jsx)("p",{className:(0,o.cn)("px-3 py-1 w-fit mb-1 rounded-lg text-white bg-gray-500",r&&"bg-sky-600"),children:"".concat(s.text)})}),(0,a.jsxs)("div",{className:(0,o.cn)("flex items-center gap-1",r&&"justify-end"),children:[s.isSeen&&(0,a.jsx)(d.Z,{size:14}),(0,a.jsx)("p",{className:"text-[#777] text-xs font-normal",children:"".concat((0,c.l)(s.createdAt,new Date))})]})]})})},m=s(495),x=s(3102),h=s(4880),p=s(4834),v=s(9842),g=s(5057),j=s(5816),b=s(8407),y=s(9725),N=s(5052),w=e=>{let[t,s]=(0,r.useState)(!1),[o,d]=(0,r.useState)(""),[c,u]=(0,r.useState)([]),w=(0,y.Z)(),{currentUser:I}=(0,j.L)(),{chatId:k,receiverId:C,isCurrentUserBlocked:z,isReceiverBlocked:U}=(0,g.a)(),S=(0,r.useRef)(null),R=async()=>{if(k&&(null==I?void 0:I.id)&&o)try{await (0,v.r7)((0,v.JU)(b.db,"chats",k),{messages:(0,v.vr)({senderId:I.id,text:o,isSeen:!1,createdAt:Date.now()})}),[I.id,C].forEach(async e=>{let t=(0,v.JU)(b.db,"userchats",e),s=await (0,v.QT)(t);if(s.exists()){let a=s.data(),r=a.chats.findIndex(e=>e.chatId===k);a.chats[r].lastMessage=o,a.chats[r].isSeen=e===I.id,a.chats[r].updatedAt=Date.now(),await (0,v.r7)(t,{chats:a.chats})}})}catch(e){console.log(e)}finally{d("")}};return(0,r.useEffect)(()=>{if(!(null==I?void 0:I.id)||!k)return;u([]);let e=(0,v.cf)((0,v.JU)(b.db,"chats",k),async e=>{var t;let s=(null==e?void 0:null===(t=e.data())||void 0===t?void 0:t.messages)||[];if(!s.length)return;let a=s.map(async e=>{let t=(0,N.OC)(e);if(null==t?void 0:t.data)return t});u((await Promise.all(a)).filter(Boolean).map(e=>({...e.data})))});return()=>e()},[k]),(0,r.useEffect)(()=>{var e;null===(e=S.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[c]),(0,a.jsxs)("div",{className:"flex flex-grow max-w-[63%] rounded p-5 border border-r-[#ebe7fb] flex-col justify-start",children:[!k&&(0,a.jsxs)("div",{className:"flex flex-col gap-2 justify-center items-center h-full",children:[(0,a.jsxs)("div",{className:"text-4xl font-bold flex flex-col items-center gap-1",children:[(0,a.jsx)("p",{className:"text-5xl",children:"\uD83D\uDC4B"}),(0,a.jsx)("p",{children:"Get started"})]}),(0,a.jsx)(m.z,{variant:"outline",onClick:()=>w.onOpen(),children:(0,a.jsx)(n.Z,{})})]}),k&&(0,a.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,a.jsxs)(h.x,{className:"h-[520px] xl:h-[530px]",children:[c.map((e,t)=>(0,a.jsx)(f,{message:e,isSender:e.senderId===(null==I?void 0:I.id)},t)),(0,a.jsx)("div",{ref:S})]}),(0,a.jsx)("div",{className:"absolute right-[50%] bottom-[21%]",children:(0,a.jsx)(p.ZP,{open:t,onEmojiClick:e=>{d(t=>t+e.emoji),s(!1)}})}),(0,a.jsx)("div",{className:"pt-5",children:(0,a.jsxs)("div",{className:"bg-white flex p-2 rounded-lg gap-2",children:[(0,a.jsx)(m.z,{variant:"outline",onClick:()=>s(e=>!e),disabled:z||U,children:(0,a.jsx)(l.Z,{})}),(0,a.jsx)(x.I,{type:"text",placeholder:z||U?"You cannot send a message":"Type a message...",value:o,onChange:e=>d(e.target.value),disabled:z||U}),(0,a.jsx)(m.z,{variant:"outline",onClick:R,disabled:z||U,children:(0,a.jsx)(i.Z,{})})]})})]})]})}},674:function(e,t,s){s.d(t,{default:function(){return S}});var a=s(7437),r=s(4817),n=s(9896),l=s(495),i=s(4880),o=s(7440),d=s(1647),c=e=>{let{chat:t,handleSelected:s}=e;return(0,a.jsxs)("div",{onClick:()=>s(t),className:"flex items-center cursor-pointer gap-3 justify-start p-3 shadow mb-3 rounded bg-white",children:[(0,a.jsxs)(d.qE,{className:(0,o.cn)("w-14 h-14",!t.isSeen&&"border-4 border-sky-600"),children:[(0,a.jsx)(d.F$,{className:"object-cover",src:t.avatar||"https://github.com/shadcn.png"}),(0,a.jsx)(d.Q5,{children:"CN"})]}),(0,a.jsxs)("div",{className:"flex justify-center w-full flex-col items-start",children:[(0,a.jsx)("div",{className:"flex gap-1 items-center ",children:(0,a.jsx)("div",{className:"font-semibold",children:t.username})}),(0,a.jsx)("div",{className:(0,o.cn)("line-clamp-2 text-slate-400 text-xs",!t.isSeen&&"font-semibold text-slate-700"),children:t.lastMessage})]})]})},u=s(9725),f=s(2265),m=s(837),x=s(3102),h=s(6425),p=e=>{let{user:t,loading:s,onCreateChat:r}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-3 justify-between p-3 mb-3 rounded bg-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)(d.qE,{className:"w-10 h-10",children:[(0,a.jsx)(d.F$,{src:t.avatar||"https://github.com/shadcn.png"}),(0,a.jsx)(d.Q5,{children:"CN"})]}),(0,a.jsxs)("div",{className:"flex justify-center flex-col",children:[(0,a.jsxs)("div",{className:"flex gap-1 items-center ",children:[(0,a.jsx)("div",{className:"font-semibold",children:t.username||t.email}),(0,a.jsx)("div",{children:"-"}),(0,a.jsx)("div",{className:"text-slate-400 text-xs",children:"5 day ago"})]}),(0,a.jsx)("div",{className:"line-clamp-1 text-slate-400 text-xs",children:t.status||"Lorem ipsum dolor sit amet consectetur adipisicing elit."})]})]}),(0,a.jsx)(l.z,{variant:"default",disabled:s,onClick:()=>r(t),children:(0,a.jsx)(h.Z,{className:"h-4 w-4"})})]})},v=s(5816),g=s(9842),j=s(7776),b=s(8407);let y=async e=>{let t=(0,g.hJ)(b.db,"userchats"),s=(0,g.JU)(t,e);return(await (0,g.QT)(s)).exists()||await (0,g.pl)(s,{chats:[]}),s},N=async e=>{let{currentUserChatDocRef:t,userChatDocRef:s,reciever:a,sender:r}=e,n=(0,g.hJ)(b.db,"chats"),l=(0,g.JU)(n);await (0,g.pl)(l,{createdAt:(0,g.Bt)(),messages:[]}),await (0,g.r7)(s,{chats:(0,g.vr)({chatId:l.id,isSeen:!1,lastMessage:"",receiverId:null==r?void 0:r.id,updatedAt:Date.now()})}),await (0,g.r7)(t,{chats:(0,g.vr)({chatId:l.id,isSeen:!1,lastMessage:"",receiverId:a.id,updatedAt:Date.now()})})};var w=e=>{var t;let{users:s}=e,[r,n]=(0,f.useState)(""),[l,o]=(0,f.useState)(!1),{currentUser:d}=(0,v.L)(),c=(0,u.Z)(),h=null!==(t=s.filter(e=>{var t;return(null===(t=e.username)||void 0===t?void 0:t.includes(r))&&e.id!==(null==d?void 0:d.id)}))&&void 0!==t?t:s,b=async e=>{var t;o(!0);let s=await y(e.id),a=await y(null==d?void 0:d.id);if(((null===(t=(await (0,g.QT)(a)).data())||void 0===t?void 0:t.chats)||[]).find(t=>t.receiverId===e.id)){j.A.error("Chat with this user already exists!"),o(!1);return}try{await N({currentUserChatDocRef:a,userChatDocRef:s,sender:d,reciever:e}),c.onClose(),j.A.success("Chat created! \uD83C\uDF89")}catch(e){console.log(e),j.A.error("Something went wrong, Please try again!")}finally{o(!1)}};return(0,a.jsx)(m.Vq,{open:c.isOpen,onOpenChange:c.onClose,children:(0,a.jsxs)(m.cZ,{className:"sm:max-w-md md:max-w-lg",children:[(0,a.jsxs)(m.fK,{children:[(0,a.jsx)(m.$N,{children:"More lovely friends "}),(0,a.jsx)(m.Be,{children:"Go make yourself some friends, or you'll be lonely."}),(0,a.jsx)(x.I,{type:"text",placeholder:"Search...",onChange:e=>n(e.target.value)})]}),(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)(i.x,{className:"xl:h-[600px] h-[480px]",children:h.map((e,t)=>(0,a.jsx)(p,{user:e,loading:l,onCreateChat:b},t))})})]})})},I=s(6919),k=s(5057),C=s(5052);let z=async e=>{let t=(0,g.JU)(b.db,"users",e);return(await (0,g.QT)(t)).data()},U=async e=>{let t=(0,C.rS)(e);if(!(null==t?void 0:t.data))return;let s=await z(t.data.receiverId),a=(0,C.S2)(s);if(null==a?void 0:a.data)return{...t.data,avatar:a.data.avatar,username:a.data.username,blocked:a.data.blocked}};var S=e=>{let[t,s]=(0,f.useState)([]),o=(0,u.Z)(),{users:d}=(0,I.Z)(),{currentUser:m}=(0,v.L)(),{changeChat:x,resetChat:h}=(0,k.a)(),p=async e=>{if(!(null==m?void 0:m.id))return;let t=(0,g.JU)(b.db,"userchats",m.id),s=await (0,g.QT)(t);try{if(s.exists()){let a=s.data().chats||[],r=a.findIndex(t=>t.chatId===e.chatId);if(-1===r)return;let n=a[r];if(n.isSeen){let e=await U(n);if(!e)return;return x(e)}if(n){let e={...n,isSeen:!0,updatedAt:Date.now()};await (0,g.r7)(t,{chats:(0,g.Ab)(n)}),await (0,g.r7)(t,{chats:(0,g.vr)(e)});let s=await U(n);if(!s)return;return x(s)}console.error("Chat not found")}else console.error("Document does not exist")}catch(e){console.log(e)}};return(0,f.useEffect)(()=>{if(!(null==m?void 0:m.id))return;let e=(0,g.cf)((0,g.JU)(b.db,"userchats",null==m?void 0:m.id),async e=>{var t;let a=(null==e?void 0:null===(t=e.data())||void 0===t?void 0:t.chats)||[];if(!a.length)return;let r=a.map(async e=>{let t=await U(e);if(t)return t});s((await Promise.all(r)).filter(Boolean).sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()))});return()=>{e()}},[]),(0,a.jsxs)("div",{className:"w-[25%] mb-5 mr-2 flex flex-col gap-6 justify-between",children:[(0,a.jsxs)(l.z,{onClick:()=>o.onOpen(),className:"shadow-sm gap-2 w-full",variant:"default",children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)("div",{children:"Find more friends"})]}),(0,a.jsx)(i.x,{className:"xl:h-[510px] h-[490px]",children:t.map(e=>(0,a.jsx)(c,{chat:e,handleSelected:p},e.chatId))}),(0,a.jsxs)(l.z,{className:"shadow-sm gap-2 w-full hover:bg-red-700",variant:"outline",onClick:()=>{b.I8.signOut(),h()},children:[(0,a.jsx)(n.Z,{}),(0,a.jsx)("div",{children:"Leave ChatRoom"})]}),(0,a.jsx)(w,{users:d})]})}},6599:function(e,t,s){s.d(t,{default:function(){return b}});var a=s(7437),r=s(8011),n=s(7422),l=s(8279),i=s(7332),o=s(495),d=s(2265),c=s(8484),u=s(7440);let f=d.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",decorative:n=!0,...l}=e;return(0,a.jsx)(c.f,{ref:t,decorative:n,orientation:r,className:(0,u.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...l})});f.displayName=c.f.displayName;var m=s(5816),x=s(1647),h=s(7138),p=s(5057),v=s(6919),g=s(8407),j=s(9842),b=e=>{var t,s;let{receiverId:d,changeBlock:c,isCurrentUserBlocked:u,isReceiverBlocked:b}=(0,p.a)(),{currentUser:y}=(0,m.L)(),{getUserById:N}=(0,v.Z)(),w=N(d)||y,I=async()=>{if(!y)return;let e=(0,j.JU)(g.db,"users",y.id);try{await (0,j.r7)(e,{blocked:b?(0,j.Ab)(d):(0,j.vr)(d)}),c()}catch(e){console.log(e)}};return(0,a.jsxs)("div",{className:"bg-white w-[20%] p-4 ml-4 rounded-lg flex flex-col items-center justify-between",children:[(0,a.jsxs)("div",{className:"items-center flex flex-col ",children:[(0,a.jsx)("div",{className:"border-[2.5px] rounded-full my-3 border-slate-500",children:(0,a.jsxs)(x.qE,{className:"w-24 h-24",children:[(0,a.jsx)(x.F$,{className:"object-cover",src:(null==w?void 0:w.avatar)||"https://github.com/shadcn.png"}),(0,a.jsx)(x.Q5,{children:"CN"})]})}),(0,a.jsx)("h4",{className:"text-[#607d8b] mt-1",children:null==w?void 0:w.username}),(0,a.jsxs)("div",{className:"mt-1 text-xs flex gap-1",children:[(0,a.jsx)("strong",{children:"Status : "}),(0,a.jsx)("p",{className:"italic",children:(null==w?void 0:w.status)||"Hi there! \uD83D\uDC4B"})]})]}),(0,a.jsx)(f,{className:"my-6 w-4/5"}),(0,a.jsxs)("div",{className:"mx-5",children:[(0,a.jsx)(r.Z,{size:20,className:"rotate-180"}),(0,a.jsx)("p",{className:"my-5 text-xs italic",children:(null==w?void 0:w.bio)||"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Voluptatum,\n          excepturi. ✌️"}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{}),(0,a.jsx)(r.Z,{size:20})]})]}),(0,a.jsx)(f,{className:"my-6 w-4/5"}),(null==w?void 0:null===(t=w.links)||void 0===t?void 0:t.length)!==0&&(0,a.jsx)("div",{className:"w-full flex flex-col mb-8 gap-1",children:null==w?void 0:null===(s=w.links)||void 0===s?void 0:s.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(n.Z,{size:12}),(0,a.jsx)(h.default,{href:e,target:"_blank",className:"text-xs font-extralight text-sky-700 truncate",children:e})]},t))}),w.id!==(null==y?void 0:y.id)&&(0,a.jsxs)(o.z,{className:"shadow-sm gap-2 hover:bg-red-700 mb-5",variant:"secondary",onClick:I,disabled:u,children:[u||b?(0,a.jsx)(l.Z,{}):(0,a.jsx)(i.Z,{}),(0,a.jsx)("div",{children:u?"Blocked!":b?"Unblock":"Block"})]})]})}},104:function(e,t,s){s.d(t,{default:function(){return z}});var a=s(7437);let r=(0,s(9099).Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}));var n=s(4258),l=s(837),i=s(2265),o=s(1014),d=s(9343),c=s(7440),u=s(6661),f=s(3102);let m=i.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,c.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});m.displayName="Textarea";var x=s(495),h=s(8648),p=s(9590),v=e=>{var t;let{currentUser:s,onUpdate:r,loading:n}=e,l=(0,d.cI)({resolver:(0,o.F)(h.mY),defaultValues:{username:(null==s?void 0:s.username)||"",status:(null==s?void 0:s.status)||"",bio:(null==s?void 0:s.bio)||"I own a computer.",urls:(null==s?void 0:null===(t=s.links)||void 0===t?void 0:t.length)?s.links.map(e=>({value:e})):[{value:"https://shadcn.com"},{value:"http://twitter.com/shadcn"}]},mode:"onChange"}),{fields:i,append:v}=(0,d.Dq)({name:"urls",control:l.control});return(0,a.jsx)(u.l0,{...l,children:(0,a.jsxs)("form",{onSubmit:l.handleSubmit(e=>r(e)),className:"space-y-8",children:[(0,a.jsx)(u.Wi,{control:l.control,name:"username",render:e=>{let{field:t}=e;return(0,a.jsxs)(u.xJ,{children:[(0,a.jsx)(u.lX,{children:"Username"}),(0,a.jsx)(u.NI,{children:(0,a.jsx)(f.I,{placeholder:"shadcn",...t})}),(0,a.jsx)(u.pf,{children:"This is your public display name. It can be your real name or a pseudonym. You can only change it anytime."}),(0,a.jsx)(u.zG,{})]})}}),(0,a.jsx)(u.Wi,{control:l.control,name:"status",render:e=>{let{field:t}=e;return(0,a.jsxs)(u.xJ,{children:[(0,a.jsx)(u.lX,{children:"Status"}),(0,a.jsx)(u.NI,{children:(0,a.jsx)(f.I,{placeholder:"shadcn",...t})}),(0,a.jsx)(u.pf,{children:"This is your status, tell others your feelings."}),(0,a.jsx)(u.zG,{})]})}}),(0,a.jsx)(u.Wi,{control:l.control,name:"bio",render:e=>{let{field:t}=e;return(0,a.jsxs)(u.xJ,{children:[(0,a.jsx)(u.lX,{children:"Bio"}),(0,a.jsx)(u.NI,{children:(0,a.jsx)(m,{placeholder:"Tell us a little bit about yourself",className:"resize-none",...t})}),(0,a.jsxs)(u.pf,{children:["You can ",(0,a.jsx)("span",{children:"@mention"})," other users and organizations to link to them."]}),(0,a.jsx)(u.zG,{})]})}}),(0,a.jsxs)("div",{children:[i.map((e,t)=>(0,a.jsx)(u.Wi,{control:l.control,name:"urls.".concat(t,".value"),render:e=>{let{field:s}=e;return(0,a.jsxs)(u.xJ,{children:[(0,a.jsx)(u.lX,{className:(0,c.cn)(0!==t&&"sr-only"),children:"URLs"}),(0,a.jsx)(u.pf,{className:(0,c.cn)(0!==t&&"sr-only"),children:"Add links to your website, blog, or social media profiles."}),(0,a.jsx)(u.NI,{children:(0,a.jsx)(f.I,{...s})}),(0,a.jsx)(u.zG,{})]})}},e.id)),(0,a.jsx)(x.z,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:()=>v({value:""}),children:"Add URL"})]}),(0,a.jsx)(x.z,{type:"submit",disabled:n,children:n?(0,a.jsxs)("div",{className:"flex justify-center items-center",children:[(0,a.jsx)(p.Z,{className:"mr-2 h-4 w-4 animate-spin"}),(0,a.jsx)("div",{children:"Update profile..."})]}):"Update profile"})]})})},g=s(4880),j=s(5816),b=s(9842),y=s(9854),N=s(8407);let w=async e=>{let t=new Date,s=(0,y.iH)(N.tO,"images/".concat(t+e.name)),a=(0,y.B0)(s,e);return new Promise((e,t)=>{a.on("state_changed",e=>{console.log("Upload is "+e.bytesTransferred/e.totalBytes*100+"% done")},e=>{t("Something went wrong!"+e.code)},()=>{(0,y.Jt)(a.snapshot.ref).then(t=>{e(t)})})})};var I=s(7776),k=e=>{let[t,s]=(0,i.useState)(!1),[n,o]=(0,i.useState)({file:null,url:""}),d=r(),{currentUser:c,fetchUserInfo:u}=(0,j.L)(),f=e=>{e.target.files&&0!==e.target.files.length&&e.target.files[0]&&o({file:e.target.files[0],url:URL.createObjectURL(e.target.files[0])})},m=async e=>{if(s(!0),!e)return;let t="";try{var a;n.file&&(t=await w(n.file));let s={avatar:t||(null==c?void 0:c.avatar),bio:e.bio,status:e.status,username:e.username,links:null===(a=e.urls)||void 0===a?void 0:a.map(e=>e.value)},r=(0,b.r7)((0,b.JU)(N.db,"users",null==c?void 0:c.id),{...s});I.A.promise(r,{loading:"Updating...",success:e=>"Profile updated! \uD83C\uDF89",error:"Somthing went wrong, Please try again!"}),u(null==c?void 0:c.id),d.onClose()}catch(e){console.log(e),I.A.error("Somthing went wrong, Please try again!")}finally{s(!1)}},x=(null==c?void 0:c.avatar)||"https://github.com/shadcn.png";return(0,a.jsx)(l.Vq,{open:d.isOpen,onOpenChange:d.onClose,children:(0,a.jsx)(l.cZ,{className:"sm:max-w-md md:max-w-lg",children:(0,a.jsx)(g.x,{className:"h-[780px]",children:(0,a.jsxs)("div",{className:"mx-1",children:[(0,a.jsxs)(l.fK,{children:[(0,a.jsx)(l.$N,{children:"Profile settings"}),(0,a.jsx)(l.Be,{children:"This is how others will see you on the ChatRoom."})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("form",{className:"flex items-center space-x-6 my-3",children:[(0,a.jsx)("div",{className:"shrink-0",children:(0,a.jsx)("img",{className:"h-20 w-20 object-cover rounded-full",src:n.url?n.url:x,alt:"Current profile photo"})}),(0,a.jsxs)("label",{className:"block",children:[(0,a.jsx)("span",{className:"sr-only",children:"Choose profile photo"}),(0,a.jsx)("input",{type:"file",onChange:e=>f(e),className:"block w-full text-sm text-slate-500   file:mr-4 file:py-2 file:px-4   file:rounded-full file:border-0   file:text-sm file:font-semibold   file:bg-violet-50 file:text-sky-700   hover:file:bg-violet-100"})]})]}),(0,a.jsx)(v,{currentUser:c,onUpdate:m,loading:t})]})]})})})})},C=s(5057),z=e=>{let t=r(),{resetChat:s}=(0,C.a)();return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{onClick:()=>s(),className:"flex items-center justify-center cursor-pointer gap-3",children:[(0,a.jsx)("img",{src:"./chat.svg",alt:"logo",className:"w-14"}),(0,a.jsx)("p",{className:"text-xl font-semibold opacity-80 text-black",children:"Let's Chat"})]}),(0,a.jsx)("div",{className:"mr-4 cursor-pointer",onClick:()=>t.onOpen(),children:(0,a.jsx)(n.Z,{})}),(0,a.jsx)(k,{})]})}},1647:function(e,t,s){s.d(t,{F$:function(){return o},Q5:function(){return d},qE:function(){return i}});var a=s(7437),r=s(2265),n=s(4458),l=s(7440);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.fC,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r})});i.displayName=n.fC.displayName;let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.Ee,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",s),...r})});o.displayName=n.Ee.displayName;let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.NY,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r})});d.displayName=n.NY.displayName},495:function(e,t,s){s.d(t,{z:function(){return d}});var a=s(7437),r=s(2265),n=s(1538),l=s(2218),i=s(7440);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:r,size:l,className:s})),ref:t,...c})});d.displayName="Button"},837:function(e,t,s){s.d(t,{$N:function(){return m},Be:function(){return x},Vq:function(){return o},cZ:function(){return u},fK:function(){return f}});var a=s(7437),r=s(2265),n=s(3907),l=s(4697),i=s(7440);let o=n.fC;n.xz;let d=n.h_;n.x8;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});c.displayName=n.aV.displayName;let u=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(n.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...o,children:[r,(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.VY.displayName;let f=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};f.displayName="DialogHeader";let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});m.displayName=n.Dx.displayName;let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});x.displayName=n.dk.displayName},6661:function(e,t,s){s.d(t,{l0:function(){return u},NI:function(){return g},pf:function(){return j},Wi:function(){return m},xJ:function(){return p},lX:function(){return v},zG:function(){return b}});var a=s(7437),r=s(2265),n=s(1538),l=s(9343),i=s(7440),o=s(8364);let d=(0,s(2218).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(o.f,{ref:t,className:(0,i.cn)(d(),s),...r})});c.displayName=o.f.displayName;let u=l.RV,f=r.createContext({}),m=e=>{let{...t}=e;return(0,a.jsx)(f.Provider,{value:{name:t.name},children:(0,a.jsx)(l.Qr,{...t})})},x=()=>{let e=r.useContext(f),t=r.useContext(h),{getFieldState:s,formState:a}=(0,l.Gc)(),n=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...n}},h=r.createContext({}),p=r.forwardRef((e,t)=>{let{className:s,...n}=e,l=r.useId();return(0,a.jsx)(h.Provider,{value:{id:l},children:(0,a.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",s),...n})})});p.displayName="FormItem";let v=r.forwardRef((e,t)=>{let{className:s,...r}=e,{error:n,formItemId:l}=x();return(0,a.jsx)(c,{ref:t,className:(0,i.cn)(n&&"text-destructive",s),htmlFor:l,...r})});v.displayName="FormLabel";let g=r.forwardRef((e,t)=>{let{...s}=e,{error:r,formItemId:l,formDescriptionId:i,formMessageId:o}=x();return(0,a.jsx)(n.g7,{ref:t,id:l,"aria-describedby":r?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!r,...s})});g.displayName="FormControl";let j=r.forwardRef((e,t)=>{let{className:s,...r}=e,{formDescriptionId:n}=x();return(0,a.jsx)("p",{ref:t,id:n,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});j.displayName="FormDescription";let b=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e,{error:l,formMessageId:o}=x(),d=l?String(null==l?void 0:l.message):r;return d?(0,a.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-sm font-medium text-destructive",s),...n,children:d}):null});b.displayName="FormMessage"},3102:function(e,t,s){s.d(t,{I:function(){return l}});var a=s(7437),r=s(2265),n=s(7440);let l=r.forwardRef((e,t)=>{let{className:s,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});l.displayName="Input"},4880:function(e,t,s){s.d(t,{x:function(){return i}});var a=s(7437),r=s(2265),n=s(1276),l=s(7440);let i=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e;return(0,a.jsxs)(n.fC,{ref:t,className:(0,l.cn)("relative overflow-hidden",s),...i,children:[(0,a.jsx)(n.l_,{className:"h-full w-full rounded-[inherit]",children:r}),(0,a.jsx)(o,{}),(0,a.jsx)(n.Ns,{})]})});i.displayName=n.fC.displayName;let o=r.forwardRef((e,t)=>{let{className:s,orientation:r="vertical",...i}=e;return(0,a.jsx)(n.gb,{ref:t,orientation:r,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...i,children:(0,a.jsx)(n.q4,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=n.gb.displayName},5052:function(e,t,s){s.d(t,{OC:function(){return l},S2:function(){return n},rS:function(){return r}});var a=s(8648);let r=e=>{let t=a.Fj.safeParse(e);return t.success?t:(console.error("Invalid chat data:",t.error),null)},n=e=>{let t=a.IK.safeParse(e);return t.success?t:(console.error("Invalid user data:",t.error),null)},l=e=>{let t=a.Fh.safeParse(e);return t.success?t:(console.error("Invalid message data:",t.error),null)}},6919:function(e,t,s){var a=s(8407),r=s(8648),n=s(9842),l=s(2265);t.Z=()=>{let[e,t]=(0,l.useState)([]),s=async()=>{let e=(0,n.hJ)(a.db,"users"),s=(0,n.IO)(e),l=await (0,n.PL)(s),i=[];l.forEach(e=>{let t={id:e.id,...e.data()};try{let e=r.IK.parse(t);i.push(e)}catch(e){console.error("Invalid user data:",e)}}),t(i)};return(0,l.useEffect)(()=>{s()},[]),{users:e,getUserById:t=>e.filter(e=>e.id===t)[0]}}},8407:function(e,t,s){s.d(t,{I8:function(){return i},db:function(){return o},tO:function(){return d}});var a=s(5236),r=s(5186),n=s(9842),l=s(9854);(0,a.ZF)({apiKey:"AIzaSyCoNEhfeL6EkH1OabObFFefDZszyP1eEjc",authDomain:"alien-paratext-321411.firebaseapp.com",projectId:"alien-paratext-321411",storageBucket:"alien-paratext-321411.appspot.com",messagingSenderId:"507392617835",appId:"1:507392617835:web:b84efd9d78f0d63f4d302e"});let i=(0,r.v0)(),o=(0,n.ad)(),d=(0,l.cF)()},7440:function(e,t,s){s.d(t,{cn:function(){return n}});var a=s(4839),r=s(6164);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}},5057:function(e,t,s){s.d(t,{a:function(){return n}});var a=s(9099),r=s(5816);let n=(0,a.Ue)(e=>({chatId:"",receiverId:"",isCurrentUserBlocked:!1,isReceiverBlocked:!1,changeChat:t=>{var s,a;let n=r.L.getState().currentUser;return(null===(s=t.blocked)||void 0===s?void 0:s.includes(null==n?void 0:n.id))?e({chatId:t.chatId,receiverId:t.receiverId,isCurrentUserBlocked:!0,isReceiverBlocked:!1}):(null==n?void 0:null===(a=n.blocked)||void 0===a?void 0:a.includes(t.receiverId))?e({chatId:t.chatId,receiverId:t.receiverId,isCurrentUserBlocked:!1,isReceiverBlocked:!0}):e({chatId:t.chatId,receiverId:t.receiverId,isCurrentUserBlocked:!1,isReceiverBlocked:!1})},changeBlock:()=>{e(e=>({...e,isReceiverBlocked:!e.isReceiverBlocked}))},resetChat:()=>{e({chatId:"",receiverId:""})}}))},9725:function(e,t,s){let a=(0,s(9099).Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}));t.Z=a},5816:function(e,t,s){s.d(t,{L:function(){return l}});var a=s(9842),r=s(9099),n=s(8407);let l=(0,r.Ue)(e=>({currentUser:null,isLoading:!0,fetchUserInfo:async t=>{if(!t)return e({currentUser:null,isLoading:!1});try{let s=(0,a.JU)(n.db,"users",t),r=await (0,a.QT)(s);r.exists()?e({currentUser:r.data(),isLoading:!1}):e({currentUser:null,isLoading:!1})}catch(t){return console.log(t),e({currentUser:null,isLoading:!1})}}}))},8648:function(e,t,s){s.d(t,{Fh:function(){return i},Fj:function(){return l},IK:function(){return r},mY:function(){return n}});var a=s(9772);let r=a.z.object({id:a.z.string(),username:a.z.string().optional(),status:a.z.string().optional(),bio:a.z.string().optional(),avatar:a.z.string().optional(),email:a.z.string().email(),blocked:a.z.string().array().optional(),links:a.z.string().array().optional()}),n=a.z.object({username:a.z.string().min(2,{message:"Username must be at least 2 characters."}).max(30,{message:"Username must not be longer than 30 characters."}),status:a.z.string().max(30,{message:"Status must not be longer than 30 characters."}),bio:a.z.string().max(160).min(4),urls:a.z.array(a.z.object({value:a.z.string().url({message:"Please enter a valid URL."})})).optional()}),l=a.z.object({chatId:a.z.string(),isSeen:a.z.boolean(),lastMessage:a.z.string().optional(),receiverId:a.z.string(),updatedAt:a.z.coerce.date()}),i=a.z.object({senderId:a.z.string(),isSeen:a.z.boolean(),text:a.z.string(),createdAt:a.z.coerce.date()})}}]);