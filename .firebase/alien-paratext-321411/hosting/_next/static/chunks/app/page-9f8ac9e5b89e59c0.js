(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4491:function(e,s,l){Promise.resolve().then(l.bind(l,649))},649:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return h}});var r=l(7437),i=l(2265),n=l(5816),t=l(5186),a=l(8407),c=l(2689),d=e=>(0,r.jsx)("div",{className:"flex justify-center items-center",children:(0,r.jsx)("div",{className:"flex justify-center items-center relative mt-1 z-10 h-full w-full",children:(0,r.jsx)(c.default,{})})}),o=l(104),x=l(7393),u=l(674),m=l(6599),f=e=>(0,r.jsxs)("div",{className:"max-w-[90%] xl:max-w-[75%] bg-white m-auto w-full flex flex-col p-3 rounded-lg",children:[(0,r.jsx)(o.default,{}),(0,r.jsxs)("div",{className:"flex-grow bg-[#f4f3f8] my-3 py-6 px-5 flex rounded-lg",children:[(0,r.jsx)(u.default,{}),(0,r.jsx)(x.default,{}),(0,r.jsx)(m.default,{})]})]});function h(){let{currentUser:e,isLoading:s,fetchUserInfo:l}=(0,n.L)();return((0,i.useEffect)(()=>{let e=(0,t.Aj)(a.I8,e=>{l(null==e?void 0:e.uid)});return()=>{e()}},[l]),s)?(0,r.jsx)("div",{className:"loading",children:"Loading..."}):(0,r.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center ",children:e?(0,r.jsx)(f,{}):(0,r.jsx)(d,{})})}},2689:function(e,s,l){"use strict";l.d(s,{default:function(){return N}});var r=l(7437),i=l(2265),n=l(1014),t=l(9343),a=l(9772),c=l(495),d=l(6661),o=l(3102),x=l(5186),u=l(8407),m=l(7776),f=l(9590);let h=a.z.object({email:a.z.string().email({message:"Invalid email address"}),password:a.z.string().min(6,{message:"Password must greater than 6"})});var j=e=>{let{containerRef:s}=e,[l,a]=(0,i.useState)(!1),j=(0,t.cI)({resolver:(0,n.F)(h),defaultValues:{email:"",password:""}}),g=async e=>{a(!0);let{email:s,password:l}=e;try{m.A.promise((0,x.e5)(u.I8,s,l),{loading:"Signing in...",success:e=>"Signed in successfuly! \uD83C\uDF89",error:"Somthing went wrong, Please try again!"})}catch(e){console.log(e),m.A.error("Somthing went wrong, Please try again!")}finally{a(!1)}};return(0,r.jsxs)("div",{className:"w-full flex flex-col",ref:s,children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-center",children:"Sign in"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("div",{className:"w-[350px]",children:(0,r.jsx)("img",{src:"/user.svg",alt:"logo",className:"w-full h-full"})}),(0,r.jsx)("div",{className:"p-8",children:(0,r.jsx)(d.l0,{...j,children:(0,r.jsxs)("form",{onSubmit:j.handleSubmit(g),className:"space-y-3",children:[(0,r.jsx)(d.Wi,{control:j.control,name:"email",render:e=>{let{field:s}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{children:"Email"}),(0,r.jsx)(d.NI,{children:(0,r.jsx)(o.I,{placeholder:"example@email.com",...s})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)(d.Wi,{control:j.control,name:"password",render:e=>{let{field:s}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{children:"Password"}),(0,r.jsx)(d.NI,{children:(0,r.jsx)(o.I,{placeholder:"password",...s,type:"password"})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(c.z,{type:"submit",disabled:l,children:l?(0,r.jsxs)("div",{className:"flex justify-center items-center",children:[(0,r.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}),(0,r.jsx)("div",{children:"Sign in..."})]}):"Sign in"})})]})})})]})]})},g=l(9842);let v=a.z.object({email:a.z.string().email({message:"Invalid email address"}),password:a.z.string().min(6,{message:"Password must greater than 6"})});var w=e=>{let{containerRef:s}=e,[l,a]=(0,i.useState)(!1),h=(0,t.cI)({resolver:(0,n.F)(v),defaultValues:{email:"",password:""}}),j=async e=>{a(!0);let{email:s,password:l}=e,r=(0,g.hJ)(u.db,"users"),i=(0,g.IO)(r,(0,g.ar)("email","==",s));if(!(await (0,g.PL)(i)).empty)return a(!1),m.A.error("Email already in use!");try{let e=await (0,x.Xb)(u.I8,s,l),r={email:s,id:e.user.uid,avatar:"",bio:"",status:"",username:s.split("@")[0],blocked:[],links:[]};await (0,g.pl)((0,g.JU)(u.db,"users",e.user.uid),{...r}),await (0,g.pl)((0,g.JU)(u.db,"userchats",e.user.uid),{chats:[]}),await (0,x.e5)(u.I8,s,l),m.A.success("Account created! \uD83C\uDF89")}catch(e){console.log(e),m.A.error("Somthing went wrong, Please try again!")}finally{a(!1)}};return(0,r.jsxs)("div",{className:"w-full flex flex-col",ref:s,children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-center",children:"Sign up"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("div",{className:"w-[350px]",children:(0,r.jsx)("img",{src:"/user.svg",alt:"logo",className:"w-full h-full"})}),(0,r.jsx)("div",{className:"p-8",children:(0,r.jsx)(d.l0,{...h,children:(0,r.jsxs)("form",{onSubmit:h.handleSubmit(j),className:"space-y-3",children:[(0,r.jsx)(d.Wi,{control:h.control,name:"email",render:e=>{let{field:s}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{children:"Email"}),(0,r.jsx)(d.NI,{children:(0,r.jsx)(o.I,{placeholder:"example@email.com",...s})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)(d.Wi,{control:h.control,name:"password",render:e=>{let{field:s}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{children:"Password"}),(0,r.jsx)(d.NI,{children:(0,r.jsx)(o.I,{placeholder:"password",...s,type:"password"})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(c.z,{type:"submit",disabled:l,children:l?(0,r.jsxs)("div",{className:"flex justify-center items-center",children:[(0,r.jsx)(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}),(0,r.jsx)("div",{children:"Sign up..."})]}):"Sign up"})})]})})})]})]})},p=e=>{let{containerRef:s,current:l,onClick:i}=e;return(0,r.jsx)("div",{className:"flex flex-col text-center duration-300 ease-in-out justify-center h-[90%] absolute rounded-md z-[1] cursor-pointer w-full bg-sky-700 right shadow-md",ref:s,onClick:i,children:(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"mx-4 text-white",children:[(0,r.jsx)("div",{className:"text-5xl my-3",children:"Login"===l?(0,r.jsx)("div",{children:"✌️"}):(0,r.jsx)("div",{children:"\uD83D\uDC4B"})}),(0,r.jsx)("div",{className:"font-semibold text-xl",children:l}),(0,r.jsx)("div",{className:"text-gray-200 text-sm",children:"Login"===l?"Welcome Back":"Create Account"})]})})})},N=e=>{let[s,l]=(0,i.useState)({isLoginActive:!0}),n=(0,i.useRef)(null),t=(0,i.useRef)(null),a=s.isLoginActive?"Register":"Login";return(0,i.useEffect)(()=>{n.current?n.current.classList.add("right"):console.error("sideBoxRef is not assigned to a DOM element")},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex bg-white relative z-20 h-full w-full py-4 px-2 shadow-lg rounded",ref:t,children:s.isLoginActive?(0,r.jsx)(j,{containerRef:e=>t.current=e}):(0,r.jsx)(w,{containerRef:e=>t.current=e})}),(0,r.jsx)(p,{current:a,containerRef:n,onClick:()=>{n.current?(s.isLoginActive?(n.current.classList.remove("right"),n.current.classList.add("left")):(n.current.classList.remove("left"),n.current.classList.add("right")),l({...s,isLoginActive:!s.isLoginActive})):console.error("sideBoxRef is not assigned to a DOM element")}})]})}}},function(e){e.O(0,[358,150,560,776,361,616,639,971,23,744],function(){return e(e.s=4491)}),_N_E=e.O()}]);